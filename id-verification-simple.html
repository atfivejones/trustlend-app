<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Identity Verification - TrustLend</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hero-gradient {
            background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 50%, #7c3aed 100%);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <a href="index.html" class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <span class="text-xl font-bold text-gray-900">TrustLend</span>
                </a>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="text-sm text-gray-600">
                        Contract: <span class="font-semibold text-gray-900">TL-1234567890</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- ID Verification Content -->
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-4">Identity Verification</h1>
            <p class="text-gray-600">Simple, secure identity confirmation without storing personal documents</p>
        </div>

        <!-- Verification Method Selection -->
        <div id="verification-method" class="bg-white rounded-xl border border-gray-200 p-8 mb-8">
            <h2 class="text-xl font-bold text-gray-900 mb-6">Choose Verification Method</h2>
            
            <div class="grid md:grid-cols-2 gap-6">
                <!-- In-Person Verification -->
                <div class="border border-green-200 rounded-lg p-6 cursor-pointer hover:border-green-400 transition-all" onclick="selectMethod('in-person')">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                            </svg>
                        </div>
                        <h3 class="text-lg font-bold text-gray-900 mb-2">Visual ID Check</h3>
                        <p class="text-gray-600 text-sm mb-4">Show government ID to the other party for manual verification</p>
                        
                        <div class="bg-green-50 rounded-lg p-3 text-left">
                            <h4 class="font-semibold text-green-800 text-sm mb-2">✅ Benefits:</h4>
                            <ul class="text-xs text-green-700 space-y-1">
                                <li>• No document storage or privacy risks</li>
                                <li>• Immediate verification in person</li>
                                <li>• Both parties see actual ID</li>
                                <li>• Maximum privacy protection</li>
                            </ul>
                        </div>
                        
                        <button class="w-full mt-4 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700">
                            Use Visual Verification
                        </button>
                    </div>
                </div>

                <!-- Remote Attestation -->
                <div class="border border-blue-200 rounded-lg p-6 cursor-pointer hover:border-blue-400 transition-all" onclick="selectMethod('remote')">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                        </div>
                        <h3 class="text-lg font-bold text-gray-900 mb-2">Self-Attestation</h3>
                        <p class="text-gray-600 text-sm mb-4">Confirm identity details without uploading documents</p>
                        
                        <div class="bg-blue-50 rounded-lg p-3 text-left">
                            <h4 class="font-semibold text-blue-800 text-sm mb-2">✅ Benefits:</h4>
                            <ul class="text-xs text-blue-700 space-y-1">
                                <li>• Works for remote signing</li>
                                <li>• No document scanning required</li>
                                <li>• Legal attestation under penalty of perjury</li>
                                <li>• Zero data storage</li>
                            </ul>
                        </div>
                        
                        <button class="w-full mt-4 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700">
                            Use Self-Attestation
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- In-Person Verification -->
        <div id="in-person-verification" class="hidden bg-white rounded-xl border border-gray-200 p-8">
            <div class="text-center mb-6">
                <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-10 h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                    </svg>
                </div>
                <h2 class="text-2xl font-bold text-gray-900">Visual ID Verification</h2>
                <p class="text-gray-600">Both parties show government-issued ID to each other</p>
            </div>

            <div class="space-y-6">
                <!-- Instructions -->
                <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                    <h3 class="text-lg font-semibold text-green-800 mb-4">Verification Process:</h3>
                    <ol class="list-decimal list-inside space-y-3 text-green-700">
                        <li><strong>Show ID:</strong> Each person shows their government-issued photo ID (driver's license, passport, state ID)</li>
                        <li><strong>Verify Details:</strong> Check that name and photo match the person present</li>
                        <li><strong>Confirm Information:</strong> Verify name matches the contract information</li>
                        <li><strong>No Photos:</strong> Do not take pictures or store any ID information</li>
                    </ol>
                </div>

                <!-- Verification Checklist -->
                <div class="border border-gray-200 rounded-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Verification Checklist</h3>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- Lender Verification -->
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-3">Lender: John Doe</h4>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" id="lender-id-shown" class="text-green-600 rounded">
                                    <span class="ml-2 text-sm">Government ID shown and verified</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="lender-name-match" class="text-green-600 rounded">
                                    <span class="ml-2 text-sm">Name matches contract: "John Doe"</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="lender-photo-match" class="text-green-600 rounded">
                                    <span class="ml-2 text-sm">Photo matches person present</span>
                                </label>
                            </div>
                        </div>

                        <!-- Borrower Verification -->
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-3">Borrower: Sarah Johnson</h4>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" id="borrower-id-shown" class="text-green-600 rounded">
                                    <span class="ml-2 text-sm">Government ID shown and verified</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="borrower-name-match" class="text-green-600 rounded">
                                    <span class="ml-2 text-sm">Name matches contract: "Sarah Johnson"</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="borrower-photo-match" class="text-green-600 rounded">
                                    <span class="ml-2 text-sm">Photo matches person present</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Legal Attestation -->
                <div class="bg-gray-50 border border-gray-200 rounded-lg p-6">
                    <label class="flex items-start">
                        <input type="checkbox" id="verification-attestation" class="text-blue-600 mt-1">
                        <span class="ml-3 text-sm text-gray-700">
                            <strong>Legal Attestation:</strong> We hereby attest that we have visually verified each other's government-issued photo identification, confirmed that the names match this loan agreement, and verified that the photos match the persons present. We understand that this attestation is made under penalty of perjury and becomes part of the legal record for this contract.
                        </span>
                    </label>
                </div>

                <!-- Complete Button -->
                <div class="text-center">
                    <button onclick="completeVerification()" class="bg-green-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-green-700 transition-all">
                        Complete Identity Verification
                    </button>
                </div>
            </div>
        </div>

        <!-- Remote Self-Attestation -->
        <div id="remote-attestation" class="hidden bg-white rounded-xl border border-gray-200 p-8">
            <div class="text-center mb-6">
                <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-10 h-10 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                </div>
                <h2 class="text-2xl font-bold text-gray-900">Self-Attestation Verification</h2>
                <p class="text-gray-600">Legal confirmation of identity without document upload</p>
            </div>

            <div class="space-y-6">
                <!-- Current Signer Info -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
                    <h3 class="text-lg font-semibold text-blue-800 mb-2">Current Signer: Sarah Johnson (Borrower)</h3>
                    <p class="text-blue-700 text-sm">Please complete your identity attestation below</p>
                </div>

                <!-- Identity Information Form -->
                <div class="border border-gray-200 rounded-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Identity Information</h3>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Full Legal Name</label>
                            <input type="text" value="Sarah Johnson" readonly class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Date of Birth</label>
                            <input type="date" id="date-of-birth" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ID Type</label>
                            <select id="id-type" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="">Select ID Type</option>
                                <option value="drivers-license">Driver's License</option>
                                <option value="state-id">State ID Card</option>
                                <option value="passport">U.S. Passport</option>
                                <option value="military-id">Military ID</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ID Number (Last 4 digits only)</label>
                            <input type="text" id="id-last-four" maxlength="4" placeholder="1234" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Current Address</label>
                            <textarea id="current-address" rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="123 Main St, City, State 12345"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Legal Attestation -->
                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
                    <h3 class="text-lg font-semibold text-yellow-800 mb-3">⚖️ Legal Attestation</h3>
                    <label class="flex items-start">
                        <input type="checkbox" id="self-attestation" class="text-blue-600 mt-1">
                        <span class="ml-3 text-sm text-gray-700">
                            <strong>Under penalty of perjury under the laws of the United States,</strong> I hereby attest that:
                            <br><br>
                            1. I am the person named in this loan agreement<br>
                            2. The identity information provided above is true and accurate<br>
                            3. I am legally authorized to enter into this agreement<br>
                            4. I understand that providing false information is a criminal offense<br>
                            5. This attestation has the same legal force as a sworn affidavit
                        </span>
                    </label>
                </div>

                <!-- Complete Button -->
                <div class="text-center">
                    <button onclick="completeAttestation()" class="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all">
                        Complete Self-Attestation
                    </button>
                </div>
            </div>
        </div>

        <!-- Completion Screen -->
        <div id="verification-complete" class="hidden bg-white rounded-xl border border-gray-200 p-8 text-center">
            <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <svg class="w-10 h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
            </div>
            
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Identity Verification Complete! ✅</h2>
            <p class="text-lg text-gray-600 mb-8">Identity confirmation has been added to the contract record</p>
            
            <div class="bg-green-50 rounded-lg p-6 mb-8">
                <h3 class="font-semibold text-green-800 mb-2">What happens next:</h3>
                <ul class="text-sm text-green-700 space-y-1">
                    <li>• Identity verification timestamp added to blockchain</li>
                    <li>• Contract gains additional legal weight</li>
                    <li>• Court evidence package updated</li>
                    <li>• No personal documents stored anywhere</li>
                </ul>
            </div>
            
            <button onclick="returnToSigning()" class="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all">
                Continue to Contract Signing
            </button>
        </div>
    </div>

    <script>
        function selectMethod(method) {
            // Hide method selection
            document.getElementById('verification-method').classList.add('hidden');
            
            if (method === 'in-person') {
                document.getElementById('in-person-verification').classList.remove('hidden');
            } else {
                document.getElementById('remote-attestation').classList.remove('hidden');
            }
        }

        function completeVerification() {
            // Check all required checkboxes
            const requiredChecks = [
                'lender-id-shown', 'lender-name-match', 'lender-photo-match',
                'borrower-id-shown', 'borrower-name-match', 'borrower-photo-match',
                'verification-attestation'
            ];
            
            const allChecked = requiredChecks.every(id => document.getElementById(id).checked);
            
            if (!allChecked) {
                alert('Please complete all verification steps and check all boxes to proceed.');
                return;
            }
            
            // Show completion
            document.getElementById('in-person-verification').classList.add('hidden');
            document.getElementById('verification-complete').classList.remove('hidden');
            
            // Log verification (no personal data stored)
            console.log('In-person identity verification completed at:', new Date().toISOString());
        }

        function completeAttestation() {
            // Validate required fields
            const dateOfBirth = document.getElementById('date-of-birth').value;
            const idType = document.getElementById('id-type').value;
            const idLastFour = document.getElementById('id-last-four').value;
            const address = document.getElementById('current-address').value;
            const attestation = document.getElementById('self-attestation').checked;
            
            if (!dateOfBirth || !idType || !idLastFour || !address || !attestation) {
                alert('Please complete all fields and check the attestation box to proceed.');
                return;
            }
            
            if (idLastFour.length !== 4 || !/^\d{4}$/.test(idLastFour)) {
                alert('Please enter exactly 4 digits for the ID number.');
                return;
            }
            
            // Show completion
            document.getElementById('remote-attestation').classList.add('hidden');
            document.getElementById('verification-complete').classList.remove('hidden');
            
            // Log attestation (minimal non-identifying data)
            console.log('Self-attestation completed at:', new Date().toISOString());
            console.log('Attestation data:', {
                hasDateOfBirth: !!dateOfBirth,
                idType: idType,
                hasAddress: !!address,
                timestamp: new Date().toISOString()
            });
        }

        function returnToSigning() {
            // Return to signing flow
            window.location.href = 'sign-contract-flexible.html';
        }
    </script>
</body>
</html>
